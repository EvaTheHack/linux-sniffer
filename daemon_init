PID_FILE=/var/run/daemon_sniffer.pid

DAEMON_NAME="daemon_sniffer"

DAEMON_PATH=DEAMON_PATH_VAR

case "$1" in
  start)
    echo "Starting $DAEMON_NAME"
    start-stop-daemon --start --quiet --background --exec /bin/bash --chuid root --chdir / -- -c "$DAEMON_PATH start"
    ;;
  stop)
    echo "Stopping $DAEMON_NAME"
    start-stop-daemon --stop --quiet --background --exec /bin/bash --chuid root --chdir / -- -c "$DAEMON_PATH stop"
    ;;
  restart)
    echo "Restarting $DAEMON_NAME"
    start-stop-daemon --stop --quiet --background --exec /bin/bash --chuid root --chdir / -- -c "$DAEMON_PATH stop"
    sleep 1
    start-stop-daemon --start --quiet --background --exec /bin/bash --chuid root --chdir / -- -c "$DAEMON_PATH start"
    ;;
  status)
    echo "Status of $DAEMON_NAME:"
    pid=$(pgrep -f "$DAEMON_PATH")
    if [ "$pid" != "" ]; then
      echo "$DAEMON_NAME is running with PID $pid"
    else
      echo "$DAEMON_NAME is not running"
    fi
    ;;
  *)
    echo "Usage: $0 {start|stop|restart|status}"
    exit 1
    ;;
esac

exit 0